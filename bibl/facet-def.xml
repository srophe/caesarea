<?xml version="1.0" encoding="UTF-8"?>
<facets xmlns="http://expath.org/ns/facet">
    <facet-definition name="Subjects">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dc:subject" and @type="subject"]/tei:desc</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Authors">
        <group-by>
            <sub-path>descendant::tei:biblStruct/descendant::tei:surname</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Manuscript Location">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dcterms:references"]/tei:desc/tei:msDesc/tei:msIdentifier/tei:settlement</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Manuscript Collection">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dcterms:references"]/tei:desc/tei:msDesc/tei:msIdentifier/tei:collection</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Manuscript Shelfmark">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dcterms:references"]/tei:desc/tei:msDesc/string-join(tei:msIdentifier/*, ", ")</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Translator">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dc:subject" and @type="translator"]/tei:desc</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Translation Source Language">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dc:subject" and @type="source"]/tei:desc</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>   
    <facet-definition name="Citation Script">
        <range type="xs:string">
            <bucket eq="matches(.,'\p{IsBasicLatin}|\p{IsLatin-1Supplement}|\p{IsLatinExtended-A}|\p{IsLatinExtended-B}|\p{IsLatinExtendedAdditional}','i')" name="A-Z" order="1"/>
            <bucket eq="matches(.,'\p{IsArabic}','i')" name="ا-ي" order="2"/>
            <bucket eq="matches(.,'\p{IsHebrew}','i')" name="א-ת" order="1"/>
            <bucket eq="not(matches(.,'\p{IsArabic}|\p{IsHebrew}|\p{IsBasicLatin}|\p{IsLatin-1Supplement}|\p{IsLatinExtended-A}|\p{IsLatinExtended-B}|\p{IsLatinExtendedAdditional}','i'))" name="Other" order="1"/>
        </range>
        <group-by>
            <sub-path>descendant::tei:titleStmt/tei:title[1]</sub-path>
        </group-by>
        <max-values show="5">25</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Community of Origin">
        <group-by>
            <sub-path>descendant::tei:relation[@ref="dc:subject" and @type="provenance"]/tei:desc</sub-path>
        </group-by>
        <max-values show="5">100</max-values>
        <order-by direction="descending">count</order-by>
    </facet-definition>
    <facet-definition name="Publication Date">
        <range type="xs:year">
            <bucket gt="2000-01-01" name="2000 &gt;" order="14"/>
            <bucket gt="1975-01-01" lt="2000-01-01" name="1975-2000" order="13"/>
            <bucket gt="1950-01-01" lt="1975-01-01" name="1950-1975" order="12"/>
            <bucket gt="1925-01-01" lt="1950-01-01" name="1925-1950" order="11"/>
            <bucket gt="1900-01-01" lt="1925-01-01" name="1900-1925" order="10"/>
            <bucket gt="1850-01-01" lt="1900-01-01" name="1850-1900" order="9"/>
            <bucket gt="1800-01-01" lt="1850-01-01" name="1800-1850" order="8"/>
            <bucket gt="1750-01-01" lt="1800-01-01" name="1750-1800" order="7"/>
            <bucket gt="1700-01-01" lt="1750-01-01" name="1700-1750" order="6"/>
            <bucket gt="1650-01-01" lt="1700-01-01" name="1650-1700" order="5"/>
            <bucket gt="1600-01-01" lt="1650-01-01" name="1600-1650" order="4"/>
            <bucket gt="1550-01-01" lt="1600-01-01" name="1550-1600" order="3"/>
            <bucket gt="1500-01-01" lt="1550-01-01" name="1500-1550" order="2"/>
            <bucket gt="1450-01-01" lt="1500-01-01" name="1450-1500" order="1"/>
        </range>
        <group-by type="xs:date">
            <sub-path>descendant::tei:biblStruct/descendant::tei:imprint/tei:date</sub-path>
        </group-by>
        <max-values show="5">40</max-values>
        <order-by direction="descending">order</order-by>
    </facet-definition>
</facets>